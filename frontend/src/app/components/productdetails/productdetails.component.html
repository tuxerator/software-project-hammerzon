<div class="container">
    <div class="card border-secondary bg-dark mx-auto col-lg-8">
        <img src="api/img/{{product?.image_id}}" class="card-img-top" alt="...">
        <div class="card-body bg-dark text-white p-4">
          <div class="card-title row justify-content-between">
            <h3 class="col me-auto">{{product?.name}}</h3>
            <h5 class="col text-end text-primary">{{product?.prize}} €/std.</h5>
          </div>
          <h6 class="card-subtitle mb-4 text-secondary">{{product?.user?.firstName}} {{product?.user?.lastName}}</h6>

          <h5>Dauer</h5>
          <p class="text-success"> {{getDurString()}}</p>
          <h5>Beschreibung</h5>
          <p class="text-light">{{product?.description}}</p>

          <h5>Termine</h5>
          <div class="row row-cols-3" role="group">
            <div class="col mb-2 d-grid"  *ngFor="let a of product?.appointments; let i = index" >
                  <button class="btn btn-primary" [ngClass]="{'disabled':a.isReserved, 'btn-secondary':a.isReserved}" [routerLink]="user ? ['order-product',i] : ['/login']"> {{getAppointString(a?.date)}} </button>
            </div>
              <!-- <ng-template #elseBlock> Please log in to place an Order </ng-template> -->
          </div>
          <div *ngIf="authService.isLogedIn() && (user?.email === product?.user?.email && user?.email !== undefined) || user?.role === 'admin'" class="d-grid gap-2 d-md-flex justify-content-md-end">
                <button type="button"  class="btn btn-success"  [routerLink]="['/add-product',product?._id]"><i class="bi bi-pencil-square"></i></button>
                <button type="button"  class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#exampleModal" ><i class="bi bi-trash-fill"></i></button>
        </div>
        </div>
      </div>
</div>


<!--Das ist für die Bewertung. In Zeile 34 brauchen wir eine condition (NG-IF), welches checkt, ob der aktuelle user eine
Bewertung abgeben darf. also ob er das Produkt schon bestellt und die Bestellung abgeschlossen ist-->
<div class="container border-secondary bg-dark mx-auto mt-4 col-lg-8">
    <form (ngSubmit)="onSubmit()" [formGroup]="addRatingForm">
      <div class="form-group">
        <label for="exampleFormControlSelect1">Wie viele Sterne möchtest du vergeben?</label>
        <select class="form-control" id="exampleFormControlSelect1" formControlName="rating">
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
        </select>
      </div>
      <div class="form-group mt-2">
        <label for="exampleFormControlTextarea1">Teile deine Bewertung...</label>
        <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" formControlName="comment"></textarea>
      </div>
      <input type="submit"  class="btn btn-primary mt-2" value="Bewertung abschicken">
    </form>
</div>

<!--Hier kommt dann mit einem NG-For alle Bewertungen des Produkts hin.-->

<section class="p-4 p-md-5 text-center text-lg-start shadow-1-strong rounded">
  <div class="row d-flex justify-content-center">
    <div class="col-md-8">
      <div class="card">
        <div class="card-body m-3">
          <div class="row">
            <div class="col-lg-4 d-flex justify-content-center align-items-center mb-4 mb-lg-0">
              <img src="../../../assets/profile.svg"
                class="rounded-circle img-fluid shadow-1" alt="woman avatar" width="200" height="200" />
            </div>
            <div class="col-lg-8">
              <p class="text-muted fw-light mb-4">
                Der Handwerker war ja mal mega schlecht. Er hat den ganzen Tag Krach gemacht, und mich die ganze Zeit um Wasser gebeten.
                Bei dem Preis kann man ja wohl erwarten, dass man sein eigenes Wasser mitbringt! Gerade aktuell so hohen Lebenshaltungskosten!
                Dazu kam dann noch, dass er ständig gefroren hat, und verlangt hat, dass ich die Heizung anmache. Null Solidarität im Ukrainekrieg hat er gezeigt! Frechheit!!!! Nie wieder!!!!! Ich würde 0 Sterne vergeben wenn ich könnte!!!!!!!!!!!!!!!!!!
              </p>
              <p class="fw-bold text-muted mb-0">Karen Smith</p>
              <!--Hier werden wir abhängig von der Bewertung, die Sterne hinterlegen, am besten auch mit NG-FOR-->
                <span class='bi bi-star-fill' style='color:#fcaf3e'></span>
                
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


<!-- Modal -->
<div class="modal fade text-black" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Produkt löschen</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">Möchten Sie das Produkt wirklich löschen?
      
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Abbrechen</button>
        <button type="button" (click)="deleteProduct()" data-bs-dismiss="modal" class="btn btn-danger">Löschen</button>
      </div>
    </div>
  </div>
</div>








